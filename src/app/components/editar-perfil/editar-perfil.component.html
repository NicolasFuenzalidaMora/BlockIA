<ion-header>
  <ion-toolbar color="primary">
    <ion-title>Editar Perfil</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="cancelar()">Cerrar</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <input type="file" #fileInput style="display: none;" (change)="onFileSelected($event)" accept="image/*" />

  <div class="ion-text-center ion-padding-bottom">
    <ion-avatar style="margin: auto; width: 100px; height: 100px;">
      <img [src]="fotoUrl || 'https://ionicframework.com/docs/img/demos/avatar.svg'" alt="Foto de usuario" />
    </ion-avatar>
    <ion-button fill="clear" size="small" (click)="cambiarFoto()">
      <ion-icon name="camera-outline" slot="start"></ion-icon>
      Cambiar foto
    </ion-button>
  </div>

  <ion-list>
    <ion-item>
      <ion-label position="stacked">Nombre Completo</ion-label>
      <ion-input type="text" [(ngModel)]="datosEditables.nombre"></ion-input>
    </ion-item>

    <ion-item>
      <ion-label position="stacked">Tel√©fono</ion-label>
      <ion-input type="tel" [(ngModel)]="datosEditables.telefono" placeholder="+569..."></ion-input>
    </ion-item>
    
    <ion-item>
      <ion-label position="stacked">Departamento / Casa</ion-label>
      <ion-input type="text" [(ngModel)]="datosEditables.departamento"></ion-input>
    </ion-item>
  </ion-list>

  <ion-list-header>
    <ion-label>Patentes</ion-label>
  </ion-list-header>
  <ion-list>
    <ion-item *ngFor="let patente of datosEditables.patentes; let i = index">
      <ion-label>{{ patente }}</ion-label>
      <ion-button fill="clear" color="danger" (click)="eliminarPatente(i)">
        <ion-icon name="trash-outline" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-item>
    <ion-item>
      <ion-input [(ngModel)]="nuevaPatente" placeholder="Agregar nueva patente (ABCD12)" (keyup.enter)="agregarPatente()"></ion-input>
      <ion-button (click)="agregarPatente()" [disabled]="!nuevaPatente">
        <ion-icon name="add-outline" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-item>
  </ion-list>

<ion-button 
    expand="block" 
    class="ion-margin-top" 
    color="primary" 
    (click)="guardarCambios()" 
    [disabled]="subiendoFoto">
  <span *ngIf="!subiendoFoto" style="color: rgb(0, 0, 0);">Guardar Cambios</span>
  <ion-spinner *ngIf="subiendoFoto" name="crescent" color="light"></ion-spinner>
</ion-button>


</ion-content>