<ion-content [fullscreen]="true" class="visitas-content">

  <div class="visitas-sheet ion-padding">

    <!-- Encabezado de la vista -->
    <header class="visitas-header">
      <h1>Visitas</h1>
      <p>Crea invitaciones y envíalas por WhatsApp.</p>
    </header>

    <!-- Tarjeta principal con el formulario -->
    <section class="visitas-card">
      <h2 class="card-title">Agregar una visita</h2>

      <form (ngSubmit)="addVisitaForm()">
        <ion-item class="field-item">
          <ion-label position="floating">Nombre</ion-label>
          <ion-input
            type="text"
            [(ngModel)]="visitaName"
            name="name"
            required>
          </ion-input>
        </ion-item>

        <ion-item class="field-item">
          <ion-label position="floating">Teléfono</ion-label>
          <ion-input
            type="tel"
            [(ngModel)]="visitaPhone"
            name="phone"
            required>
          </ion-input>
        </ion-item>

        <ion-item class="field-item">
          <ion-label position="floating">Patente</ion-label>
          <ion-input
            type="text"
            [(ngModel)]="visitaPatente"
            name="patente"
            required>
          </ion-input>
        </ion-item>

        <div class="time-row">
          <ion-item class="field-item time-item">
            <ion-label position="floating">Hora de entrada</ion-label>
            <ion-input
              type="time"
              [(ngModel)]="visitaHoraInicio"
              name="horaInicio"
              required>
            </ion-input>
          </ion-item>

          <ion-item class="field-item time-item">
            <ion-label position="floating">Hora de salida</ion-label>
            <ion-input
              type="time"
              [(ngModel)]="visitaHoraFin"
              name="horaFin"
              required>
            </ion-input>
          </ion-item>
        </div>

        <!-- Enviar a condominio -->
        <p class="envio-a">
          Enviar a:
          <span class="envio-condo">
            {{ condominioSeleccionado?.nombre || 'Ninguno seleccionado' }}
          </span>

          <button
            *ngIf="(misCondominios?.length ?? 0) > 1"
            type="button"
            class="btn-cambiar"
            (click)="cambiarCondominio()">
            Cambiar
          </button>
        </p>

        <!-- Botón principal -->
        <ion-button
          expand="block"
          color="primary"
          type="submit"
          class="btn-primary">
          ENVIAR INVITACIÓN (WHATSAPP)
        </ion-button>

        <!-- Botón secundario: historial -->
        <ion-button
          expand="block"
          fill="outline"
          color="medium"
          type="button"
          class="btn-secondary"
          (click)="verHistorialInvitaciones()">
          Ver historial de invitaciones
        </ion-button>
      </form>
    </section>

  </div>

  <!-- Barra inferior de navegación -->
  <app-menu-lateral></app-menu-lateral>
</ion-content>
