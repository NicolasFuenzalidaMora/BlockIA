<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-menu-button menu="first"></ion-menu-button>
    </ion-buttons>
    <ion-title>Visitas</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="visitas-content">
  <div class="wrapper ion-padding">
    <b>Agregar una visita</b>

    <form (ngSubmit)="addVisitaForm()">
      <ion-item>
        <ion-label position="floating">Nombre</ion-label>
        <ion-input type="text" [(ngModel)]="visitaName" name="name" required></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="floating">Teléfono</ion-label>
        <ion-input type="tel" [(ngModel)]="visitaPhone" name="phone" required></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="floating">Patente</ion-label>
        <ion-input type="text" [(ngModel)]="visitaPatente" name="patente" required></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="floating">Hora de entrada</ion-label>
        <ion-input type="time" [(ngModel)]="visitaHoraInicio" name="horaInicio" required></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="floating">Hora de salida</ion-label>
        <ion-input type="time" [(ngModel)]="visitaHoraFin" name="horaFin" required></ion-input>
      </ion-item>

      <p class="envio-a">
        Enviar a:
        <strong>{{ condominioSeleccionado?.nombre || 'Ninguno seleccionado' }}</strong>
        <button
          *ngIf="(misCondominios?.length ?? 0) > 1"
          type="button"
          class="btn-cambiar"
          (click)="cambiarCondominio()">
          Cambiar
        </button>
      </p>

      <ion-button expand="block" color="primary" type="submit" class="ion-margin-top">
        ENVIAR INVITACIÓN (WHATSAPP)
      </ion-button>

      <!-- Botón secundario para ver historial (reemplaza el FAB) -->
      <ion-button expand="block" fill="outline" color="medium" class="ion-margin-top"
                  type="button" (click)="verHistorialInvitaciones()">
        Ver historial de invitaciones
      </ion-button>
    </form>
  </div>
</ion-content>
