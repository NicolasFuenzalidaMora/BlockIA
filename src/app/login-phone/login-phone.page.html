<ion-content [fullscreen]="true" class="login-content">
  <div class="sheet">

    <!-- CABECERA / BRAND -->
    <div class="auth-head">
      <div class="brand-logo" aria-hidden="true">
        <!-- Escudo BlockIA -->
        <svg viewBox="0 0 48 48" class="shield">
          <defs>
            <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#3B6EF6"/>
              <stop offset="1" stop-color="#2E5DEB"/>
            </linearGradient>
          </defs>
          <rect x="0" y="0" width="48" height="48" rx="14" fill="url(#g)"/>
          <path fill="#fff"
            d="M24 9.8c.6 0 1.2.16 1.7.46l8 4.62c.8.47 1.3 1.33 1.3 2.26v7.7c0 3.83-2.1 7.35-5.5 9.18l-4.4 2.38a2.8 2.8 0 0 1-2.7 0l-4.4-2.38A10.6 10.6 0 0 1 13 24.82v-7.7c0-.93.5-1.79 1.3-2.26l8-4.62c.5-.3 1.1-.46 1.7-.46Zm0 6.7c-3.5 0-6.3 2.84-6.3 6.34 0 3.49 2.8 6.33 6.3 6.33s6.3-2.84 6.3-6.33c0-3.5-2.8-6.33-6.3-6.33Zm0 3a3.34 3.34 0 1 1 0 6.67 3.34 3.34 0 0 1 0-6.67Z"/>
        </svg>
      </div>
      <h1 class="brand-title">BlockIA</h1>
      <p class="brand-subtitle">Control inteligente de accesos residenciales</p>
    </div>

    <!-- ESPACIADOR FLEX: centra verticalmente -->
    <div class="flex-spacer"></div>

    <!-- FORMULARIO (TEL / OTP) -->
    <div class="auth-middle">
      <div class="auth-title">
        <h2>Inicia sesión</h2>
        <p>Accede con tu número de teléfono</p>
      </div>

      <!-- TELÉFONO -->
      <ng-container *ngIf="!otpSent">
        <ion-item class="block-input" lines="none">
          <ion-icon name="call-outline" slot="start"></ion-icon>
          <ion-label position="stacked">Número de teléfono</ion-label>
          <ion-input [(ngModel)]="phone" type="tel" inputmode="tel" placeholder="+569 1234 5678"></ion-input>
        </ion-item>

        <!-- reCAPTCHA (invisible) -->
        <div id="recaptcha-container"></div>

        <ion-button expand="block" class="block-btn" (click)="enviarOTP()">
          ENVIAR CÓDIGO
        </ion-button>
      </ng-container>

      <!-- OTP -->
      <ng-container *ngIf="otpSent">
        <ion-item class="block-input" lines="none">
          <ion-icon name="key-outline" slot="start"></ion-icon>
          <ion-label position="stacked">Código OTP</ion-label>
          <ion-input [(ngModel)]="otp" type="number" maxlength="6" placeholder="Ingresa el código"></ion-input>
        </ion-item>

        <ion-button expand="block" class="block-btn" (click)="verificarOTP()">
          VERIFICAR CÓDIGO
        </ion-button>
        <p class="hint">Revisa tu SMS, el código llega en segundos.</p>
      </ng-container>

      <p *ngIf="error" class="error-text">{{ error }}</p>
    </div>

    <!-- FOOTER FIJADO ABAJO -->
    <div class="auth-footer">
      <p class="terms">
        Al continuar, aceptas nuestros
        <a href="#">Términos</a> y
        <a href="#">Privacidad</a>.
      </p>
    </div>

  </div>
</ion-content>
